# Template: Notify Parent Workflow
#
# INSTALL: Copy this file to each subrepo at:
#   .github/workflows/notify-parent.yml
#
# When a subrepo pushes to main, notify the parent tracepipe repo
# to update its submodule reference.

name: Notify Parent

on:
  push:
    branches: [main]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger parent submodule update
        env:
          GH_TOKEN: ${{ secrets.PAT_TOKEN }}
        run: |
          gh api repos/CRSS-AI/tracepipe/dispatches \
            -X POST \
            -f event_type=submodule-update \
            -f client_payload='{"source": "${{ github.repository }}"}'
